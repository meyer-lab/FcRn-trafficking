pipeline {
  agent any
  stages {
    stage('Clean') {
      steps { sh 'git clean -ffdx' }
    }
    stage('Setup Environment') {
      steps {
        sh 'R -e \"source(\'packrat/init.R\')\"'
        sh 'R -e \"packrat::on()\"'
      }
    }
    stage('Test') {
      steps {
        sh 'R -e \"library(methods); devtools::test(\'./fcrn\')\"'
      }
    }
    stage('Build') {
      steps {
        sh 'echo Build'
      }
    }
  }
}
